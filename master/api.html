<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Easy mail sending">
    <meta name="author" content="EasyMail">
    <link rel="icon" href="../resources/favicon.ico">

    <title>Easy mail sending - Installation</title>

    <!-- Bootstrap Core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">

    <!-- Font awesome -->
    <link href="../css/font-awesome.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="../css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../css/custom.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-static-top" id="navigation">
        <a href="/" class="brand nav-block">
            <img src="../resources/easymail-logo.png" width="200"/>
        </a>
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="/">Home</a></li>
                    <li class="active"><a href="/master/installation">Documentation</a></li>					
                    <li><a href="/history">History</a></li>
                    <li><a href="/faqs">FAQs</a></li>
					<li><a href="/master/contribution-guide">Contribute</a></li>
					<li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="https://github.com/runeasymail/easymail" target="_blank">Github</a></li>
                            <li role="separator" class="divider"></li>                            
                            <li><a href="https://runeasymail.slack.com/" target="_blank">Slack</a></li>  
							<li><a href="https://twitter.com/RunEasyMail" target="_blank">Twitter</a></li>  							
                        </ul>
                    </li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>

    <!-- Page Content -->
    <div class="container">
		<div class="row">
			<!-- Single button -->
			<div class="btn-group switcher">
				<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					Master <span class="caret"></span>
				</button>
				<ul class="dropdown-menu">
					<li><a href="/master/api">Master</a></li>
					<li><a href="/0.5/installation">0.5</a></li>
				</ul>
			</div>
		</div>
        <div class="row">
            <div class="col-md-3" id="sidebar-menu">
                <p class="lead">Prologue</p>
                <div class="list-group">
                    <a href="https://github.com/runeasymail/easymail/releases" target="_blank" class="list-group-item">Release Notes</a>
                    <a href="/master/contribution-guide" class="list-group-item">Contribution Guide</a>
                </div>

                <p class="lead">Getting Started</p>
                <div class="list-group">
                    <a href="/master/installation" class="list-group-item active">Installation</a>					
                </div>
				
				<p class="lead">Tools</p>
                <div class="list-group">
                    <a href="/master/api" class="list-group-item">API</a>					
                </div>
            </div>
            <div class="col-md-9">
                <div class="page-header">
                    <h1>API</h1>

					<p>Choose from the list of API method.</p>
                    <ul class="list-unstyled list-content">
                        <li><a href="#authorization"><span class="n-sign">#</span> Authorization</a></li>
						<li><a href="#get-domains"><span class="n-sign">#</span> Get domains</a></li>
						<li><a href="#get-users"><span class="n-sign">#</span> Get users</a></li>
						<li><a href="#create-domain-and-email-account"><span class="n-sign">#</span> Create domain and add email account</a></li>
						<li><a href="#create-user"><span class="n-sign">#</span> Create user</a></li>
						<li><a href="#change-users-password"><span class="n-sign">#</span> Change user's password</a></li>						
						<li><a href="#generate-letsencrypt-certificate"><span class="n-sign">#</span> Generate Letsencrypt certificate</a></li>						
                    </ul>
                </div>
				
				
				<!-- Authorization -->
				<h2 id="authorization"><span class="n-sign">#</span> Authorization</h2>
				<p>Before we use any of the API methods, we will have to authenticate with our username and password and to receive Auth-token. This token will be used for all other requests to the API.</p>
				<p><button class="btn btn-primary" type="button">POST</button></p>
				<figure><pre><code>API_URL/auth</code></pre></figure>			
				
				<p>Request <i>(CURL)</i>:</p>
				<figure><pre><code>curl -X POST  -F "username=USERNAME" -F "password=PASSWORD" "API_URL/auth"</code></pre></figure>
				
				<p>Input parameters:</p>
				<figure><pre><code>username - string 
password - string</code></pre></figure>

				<p>Success-Reponse <i>(JSON)</i>:</p>
				<figure><pre><code>{
	"result": true,
	"token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE0ODYxMTY0MDYsInVzZXJuYW1lIjoieXVrc2VsIn0.ZWXvA"
}</code></pre></figure>
				
				<p>Error <i>(JSON)</i>:</p>			
				<figure><pre><code>{
	"msg": "Username/password is not correct",
	"result": false
}</code></pre></figure>
				
				
				<!-- Get domains -->
				<h2 id="get-domains"><span class="n-sign">#</span> Get domains</h2>
				<p>It's will give list of all availible domains used for the email accounts.</p>
				<p><button class="btn btn-success" type="button">GET</button></p>
				<figure><pre><code>API_URL/domains</code></pre></figure>			
				
				<p>Request <i>(CURL)</i>:</p>
				<figure><pre><code>curl -X GET -H "Auth-token: TOKEN" -H "Cache-Control: no-cache" "API_URL/domains"</code></pre></figure>
				
				<p>Success-Reponse <i>(JSON)</i>:</p>
				<figure><pre><code>{
   "domains":[
		{
			"id":1,
			"name":"example.com",
			"users_count":5
		},
		{
			"id":2,
			"name":"anotherexample.com",
			"users_count":3
		},
		...
   ]
}</code></pre></figure>
				
				<!-- Get users -->
				<h2 id="get-users"><span class="n-sign">#</span> Get users</h2>
				<p>Return all users for a domain with specific id.</p>
				<p><button class="btn btn-success" type="button">GET</button></p>
				<figure><pre><code>API_URL/users/:domain_id</code></pre></figure>			
				
				<p>Request <i>(CURL)</i>:</p>
				<figure><pre><code>curl -X GET -H "Auth-token: TOKEN" -H "Cache-Control: no-cache" "API_URL/users/DOMAIN_ID"</code></pre></figure>
				
				<p>Input parameters:</p>
				<figure><pre><code>domain_id - id of domain</code></pre></figure>

				<p>Success-Reponse <i>(JSON)</i>:</p>
				<figure><pre><code>{
   "users":[
		{
			"id":1,
			"domain_id":1,
			"email":"admin@example.com"
		}
   ]
}</code></pre></figure>
				
				<!-- Create domain and add email account -->
				<h2 id="create-domain-and-email-account"><span class="n-sign">#</span> Create domain and add email account</h2>
				<p>This method will create a new domain and it will add a new email account to it.</p>
				<p><button class="btn btn-primary" type="button">POST</button></p>
				<figure><pre><code>API_URL/domains</code></pre></figure>			
				
				<p>Request <i>(CURL)</i>:</p>
				<figure><pre><code>curl -X POST -H "Auth-token: TOKEN" -H "Cache-Control: no-cache" -F "domain=alsoanotherexample.com" -F "username=USERNAME" -F "password=PASSWORD" "API_URL/domains"</code></pre></figure>
				
				<p>Input parameters:</p>
				<figure><pre><code>domain - string
username - string (email)
password - string</code></pre></figure>
				
				
				<!-- Create user -->
				<h2 id="create-user"><span class="n-sign">#</span> Create user</h2>
				<p>Create a new email account.</p>
				<p><button class="btn btn-primary" type="button">POST</button></p>
				<figure><pre><code>API_URL/user/:domain_id</code></pre></figure>			
				
				<p>Request <i>(CURL)</i>:</p>
				<figure><pre><code>curl -X POST -H "Auth-token: TOKEN" -H "Cache-Control: no-cache" -F "email=EMAIL" -F "password=UNENCRYPTED_PASS" "API_URL/user/DOMAIN_ID"</code></pre></figure>
				
				<p>Input parameters:</p>
				<figure><pre><code>domain_id - id of the domain name
email - email address of the new user
password - unencrypted password</code></pre></figure>
				
				<!-- Change user's password -->
				<h2 id="change-users-password"><span class="n-sign">#</span> Change user's password</h2>
				<p>Change the user's password.</p>
				<p><button class="btn btn-primary" type="button">POST</button></p>
				<figure><pre><code>API_URL/user-change-password</code></pre></figure>			
				
				<p>Request <i>(CURL)</i>:</p>
				<figure><pre><code>curl -X POST -H "Auth-token: TOKEN" -H "Cache-Control: no-cache" -F "id=USER_ID" -F "password=NEW_UNENCRYPTED_PASS" -F "domain_id=DOMAIN_ID" "API_URL/user-change-password"</code></pre></figure>
				
				<p>Input parameters:</p>
				<figure><pre><code>id - Id of the user
password - New unencrypted password
domain_id - id of domain</code></pre></figure>
				
				<!-- Generate Let's encrypt certificate -->
				<h2 id="generate-letsencrypt-certificate"><span class="n-sign">#</span> Generate Letsencrypt certificate</h2>
				<p>Generate a new Let's Encrypt certificate for a chosen hostname.</p>
				<p><button class="btn btn-primary" type="button">POST</button></p>
				<figure><pre><code>API_URL/ssl/letsencrypt/install</code></pre></figure>			
				
				<p>Request <i>(CURL)</i>:</p>
				<figure><pre><code>curl -X POST -H "Auth-token: TOKEN" -H "Cache-Control: no-cache" -F "hostname=example.com" "API_URL/ssl/letsencrypt/install"</code></pre></figure>
				
				<p>Input parameters:</p>
				<figure><pre><code>hostname - domain name for which we will generate a Let's encrypt certificate</code></pre></figure>
				
				
				<!--
				<figure><pre><code>...</code></pre></figure>
				<p><button class="btn btn-success" type="button">GET</button></p>
				<p><button class="btn btn-primary" type="button">POST</button></p>
				<p><button class="btn btn-warning" type="button">PUT</button></p>
				<p><button class="btn btn-danger" type="button">DELETE</button></p>
				-->
				<br /><br /><br />
            </div>
        </div>
    </div>
    <!-- /.container -->

    <!-- Footer -->
	<div id="ask-question" class="ask-question">If you have any issues and questions during the Installation, we would like to hear them and to help.<br /><br />
		<a href="https://runeasymail.slack.com/" target="_blank" rel="nofollow">Slack</a>
	</div>
	<a href="#navigation" class="go-to-top"><i class="fa fa-arrow-circle-up fa-3x"></i></a>
    <footer class="footer">
        <div class="container">
            <ul class="list-inline navigation">
                <li>
					<a href="/">Home</a>
					| <a href="/master/installation">Documentation</a>
					| <a href="/history">History</a>
					| <a href="/faqs">FAQs</a>				
					| <a href="/master/contribution-guide">Contribute</a>					
					| <a href="https://github.com/runeasymail/easymail" target="_blank">Github</a>	
					| <a href="https://runeasymail.slack.com/" target="_blank">Slack</a>
                </li>
            </ul>
            <br />
            <ul class="list-inline social-buttons">
                <li>
                    <a target="_blank" href="https://twitter.com/RunEasyMail"><i class="fa fa-twitter"></i></a>
                </li>
                <li>
                    <a target="_blank" href="https://www.facebook.com/RunEasyMail/"><i class="fa fa-facebook"></i></a>
                </li>
            </ul>
            <br />
            <p class="text-muted">Copyright &copy; EasyMail - Easy mail sending</p>
        </div>
    </footer>
    <!-- /.container -->



    <!-- Bootstrap core JavaScript
    ================================================== -->
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../js/ie10-viewport-bug-workaround.js"></script>
	
	<!-- Cusatom js -->
	<script>
		$(document).ready(function() {		
			var headerTop = $('#navigation').offset().top;		
			var headerBottom = headerTop + 100; // Sub-menu should appear after this distance from top.
			$(window).scroll(function () {
				var scrollTop = $(window).scrollTop(); // Current vertical scroll position from the top				
				if (scrollTop > headerBottom) { // Check to see if we have scrolled more than headerBottom
					if (($("#ask-question").is(":visible") === false)) {
						$('#ask-question').fadeIn('slow');
					}
				} else {
					if ($("#ask-question").is(":visible")) {
						$('#ask-question').fadeOut('slow');
					}
				}
			});
		});
	</script>
	
	<!-- GA -->
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-86498991-1', 'auto');
	  ga('send', 'pageview');

	</script>
</body>

</html>
